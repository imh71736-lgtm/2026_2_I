<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ë°ì´í„° ì••ì¶• ì‹¤ìŠµ â€” ì†ì‹¤ vs ë¬´ì†ì‹¤</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700;900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0d0f14;
    --surface: #161a23;
    --surface2: #1e2433;
    --border: #2a3045;
    --text: #e8eaf0;
    --muted: #6b7494;
    --accent-png: #00d4aa;
    --accent-jpg: #ff6b35;
    --accent-blue: #4d8eff;
    --green: #4ade80;
    --red: #f87171;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Noto Sans KR', sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Grid background */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image:
      linear-gradient(rgba(77,142,255,0.04) 1px, transparent 1px),
      linear-gradient(90deg, rgba(77,142,255,0.04) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: 0;
  }

  .container {
    position: relative;
    z-index: 1;
    max-width: 1100px;
    margin: 0 auto;
    padding: 40px 24px 80px;
  }

  header {
    text-align: center;
    margin-bottom: 48px;
  }

  .badge {
    display: inline-block;
    background: rgba(77,142,255,0.15);
    border: 1px solid rgba(77,142,255,0.35);
    color: var(--accent-blue);
    font-family: 'Space Mono', monospace;
    font-size: 11px;
    letter-spacing: 2px;
    padding: 4px 12px;
    border-radius: 2px;
    margin-bottom: 16px;
    text-transform: uppercase;
  }

  h1 {
    font-size: clamp(28px, 5vw, 48px);
    font-weight: 900;
    letter-spacing: -1px;
    line-height: 1.1;
    margin-bottom: 12px;
  }

  h1 span.png { color: var(--accent-png); }
  h1 span.jpg { color: var(--accent-jpg); }

  .subtitle {
    color: var(--muted);
    font-size: 15px;
    line-height: 1.6;
    max-width: 500px;
    margin: 0 auto;
  }

  /* Upload Zone */
  .upload-zone {
    border: 2px dashed var(--border);
    border-radius: 12px;
    padding: 48px 24px;
    text-align: center;
    cursor: pointer;
    transition: all 0.25s;
    background: var(--surface);
    margin-bottom: 40px;
    position: relative;
    overflow: hidden;
  }

  .upload-zone:hover, .upload-zone.dragover {
    border-color: var(--accent-blue);
    background: rgba(77,142,255,0.05);
  }

  .upload-zone .upload-icon {
    font-size: 48px;
    margin-bottom: 12px;
    display: block;
  }

  .upload-zone h3 {
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 6px;
  }

  .upload-zone p {
    color: var(--muted);
    font-size: 13px;
  }

  #fileInput { display: none; }

  /* Main comparison grid */
  .comparison-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 32px;
  }

  @media (max-width: 700px) {
    .comparison-grid { grid-template-columns: 1fr; }
  }

  .card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
  }

  .card-header {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 14px 18px;
    border-bottom: 1px solid var(--border);
  }

  .card-dot {
    width: 12px;
    height: 12px;
    border-radius: 50%;
    flex-shrink: 0;
  }

  .card-header h2 {
    font-size: 14px;
    font-weight: 700;
    font-family: 'Space Mono', monospace;
  }

  .card-header .tag {
    margin-left: auto;
    font-size: 10px;
    font-family: 'Space Mono', monospace;
    padding: 2px 8px;
    border-radius: 2px;
    font-weight: 700;
    letter-spacing: 1px;
  }

  .card-body { padding: 18px; }

  .img-preview {
    width: 100%;
    aspect-ratio: 4/3;
    object-fit: cover;
    border-radius: 6px;
    margin-bottom: 14px;
    background: var(--surface2);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--muted);
    font-size: 13px;
  }

  .img-preview img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 6px;
  }

  .stats-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid var(--border);
    font-size: 13px;
  }

  .stats-row:last-child { border-bottom: none; }

  .stats-row .label { color: var(--muted); }
  .stats-row .value {
    font-family: 'Space Mono', monospace;
    font-weight: 700;
    font-size: 13px;
  }

  /* Quality Slider */
  .quality-section {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
    margin-bottom: 32px;
  }

  .quality-section h3 {
    font-size: 15px;
    font-weight: 700;
    margin-bottom: 18px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .slider-group {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 16px;
    align-items: center;
  }

  .slider-label {
    font-size: 12px;
    color: var(--muted);
    margin-bottom: 8px;
    font-family: 'Space Mono', monospace;
  }

  input[type="range"] {
    width: 100%;
    height: 4px;
    -webkit-appearance: none;
    background: var(--border);
    border-radius: 2px;
    outline: none;
    cursor: pointer;
  }

  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    background: var(--accent-jpg);
    cursor: pointer;
    border: 2px solid var(--bg);
    box-shadow: 0 0 0 2px var(--accent-jpg);
  }

  .quality-value {
    font-family: 'Space Mono', monospace;
    font-size: 28px;
    font-weight: 700;
    color: var(--accent-jpg);
    text-align: center;
    min-width: 70px;
  }

  .quality-value small {
    display: block;
    font-size: 11px;
    color: var(--muted);
    margin-top: 2px;
  }

  /* Analysis Bar */
  .analysis-section {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
    margin-bottom: 32px;
  }

  .analysis-section h3 {
    font-size: 15px;
    font-weight: 700;
    margin-bottom: 20px;
  }

  .bar-compare {
    margin-bottom: 20px;
  }

  .bar-label {
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    margin-bottom: 6px;
    font-family: 'Space Mono', monospace;
  }

  .bar-track {
    height: 10px;
    background: var(--surface2);
    border-radius: 5px;
    overflow: hidden;
  }

  .bar-fill {
    height: 100%;
    border-radius: 5px;
    transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
  }

  /* Zoom compare */
  .zoom-section {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
    margin-bottom: 32px;
  }

  .zoom-section h3 {
    font-size: 15px;
    font-weight: 700;
    margin-bottom: 16px;
  }

  .zoom-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
  }

  .zoom-item { position: relative; }
  .zoom-item canvas {
    width: 100%;
    border-radius: 6px;
    image-rendering: pixelated;
    border: 1px solid var(--border);
  }

  .zoom-tag {
    position: absolute;
    top: 8px;
    left: 8px;
    font-family: 'Space Mono', monospace;
    font-size: 10px;
    font-weight: 700;
    padding: 2px 8px;
    border-radius: 2px;
  }

  /* Data Table */
  .table-section {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    overflow: hidden;
    margin-bottom: 32px;
  }

  .table-section h3 {
    font-size: 15px;
    font-weight: 700;
    padding: 18px 20px;
    border-bottom: 1px solid var(--border);
  }

  table {
    width: 100%;
    border-collapse: collapse;
    font-size: 13px;
  }

  th {
    text-align: left;
    padding: 10px 20px;
    font-family: 'Space Mono', monospace;
    font-size: 11px;
    color: var(--muted);
    letter-spacing: 1px;
    border-bottom: 1px solid var(--border);
    background: var(--surface2);
  }

  td {
    padding: 12px 20px;
    border-bottom: 1px solid rgba(42,48,69,0.5);
  }

  tr:last-child td { border-bottom: none; }

  td .mono { font-family: 'Space Mono', monospace; }

  /* Discussion */
  .discussion-section {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 24px;
  }

  .discussion-section h3 {
    font-size: 15px;
    font-weight: 700;
    margin-bottom: 18px;
  }

  .q-item {
    border: 1px solid var(--border);
    border-radius: 8px;
    margin-bottom: 12px;
    overflow: hidden;
  }

  .q-header {
    padding: 14px 18px;
    background: var(--surface2);
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 14px;
    font-weight: 500;
    user-select: none;
    transition: background 0.2s;
  }

  .q-header:hover { background: #252c3f; }

  .q-body {
    display: none;
    padding: 14px 18px;
    font-size: 13px;
    color: var(--muted);
    line-height: 1.7;
    border-top: 1px solid var(--border);
  }

  .q-body.open { display: block; }

  .answer-highlight {
    display: inline-block;
    background: rgba(0,212,170,0.12);
    border-left: 3px solid var(--accent-png);
    padding: 8px 12px;
    border-radius: 0 4px 4px 0;
    margin-top: 8px;
    color: var(--text);
  }

  /* Empty State */
  .empty-state {
    text-align: center;
    padding: 32px;
    color: var(--muted);
    font-size: 13px;
  }

  .btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 10px 20px;
    border-radius: 6px;
    font-size: 13px;
    font-weight: 600;
    cursor: pointer;
    border: none;
    transition: all 0.2s;
    font-family: 'Noto Sans KR', sans-serif;
  }

  .btn-primary {
    background: var(--accent-blue);
    color: white;
  }

  .btn-primary:hover { opacity: 0.85; transform: translateY(-1px); }

  .section-title-row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 24px;
  }

  .step-num {
    width: 26px;
    height: 26px;
    border-radius: 50%;
    background: var(--accent-blue);
    color: white;
    font-size: 12px;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    font-family: 'Space Mono', monospace;
  }

  .hidden { display: none; }

  .compression-verdict {
    margin-top: 16px;
    padding: 14px 18px;
    border-radius: 8px;
    font-size: 14px;
    line-height: 1.6;
  }

  .quality-meter {
    display: flex;
    gap: 4px;
    margin-top: 8px;
  }

  .quality-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--border);
    transition: background 0.3s;
  }

  .quality-dot.active { background: var(--accent-jpg); }
</style>
</head>
<body>
<div class="container">

  <header>
    <div class="badge">ì‹¤ìŠµ #2 â€” ë°ì´í„° ì••ì¶• ì²´í—˜</div>
    <h1><span class="png">PNG</span> vs <span class="jpg">JPEG</span><br>ì†ì‹¤Â·ë¬´ì†ì‹¤ ì••ì¶• ë¹„êµ</h1>
    <p class="subtitle">ì‚¬ì§„ì„ ì˜¬ë ¤ì„œ ë‘ í˜•ì‹ì˜ íŒŒì¼ í¬ê¸°Â·í™”ì§ˆ ì°¨ì´ë¥¼ ì§ì ‘ ì¸¡ì •í•˜ê³  ë¶„ì„í•´ë³´ì„¸ìš”</p>
  </header>

  <!-- STEP 1: Upload -->
  <div class="section-title-row">
    <div class="step-num">1</div>
    <h2 style="font-size:16px;font-weight:700;">ì‚¬ì§„ ì—…ë¡œë“œ</h2>
  </div>

  <div class="upload-zone" id="uploadZone" onclick="document.getElementById('fileInput').click()">
    <span class="upload-icon">ğŸ–¼ï¸</span>
    <h3>ì‚¬ì§„ì„ ì—¬ê¸°ì— ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•´ì„œ ì„ íƒ</h3>
    <p>JPG, PNG, BMP, WEBP ë“± ì¼ë°˜ ì´ë¯¸ì§€ íŒŒì¼ (ê¶Œì¥: í’ê²½ ë˜ëŠ” ì¸ë¬¼ ì‚¬ì§„)</p>
  </div>
  <input type="file" id="fileInput" accept="image/*">

  <!-- STEP 2: Quality -->
  <div id="mainContent" class="hidden">

    <div class="section-title-row">
      <div class="step-num">2</div>
      <h2 style="font-size:16px;font-weight:700;">JPEG í’ˆì§ˆ ì¡°ì ˆ</h2>
    </div>

    <div class="quality-section">
      <div class="slider-group">
        <div>
          <div class="slider-label">JPEG QUALITY</div>
          <input type="range" id="qualitySlider" min="1" max="100" value="50">
          <div style="display:flex;justify-content:space-between;font-size:11px;color:var(--muted);margin-top:6px;font-family:'Space Mono',monospace;">
            <span>ìµœì € í’ˆì§ˆ (ìµœê³  ì••ì¶•)</span>
            <span>ìµœê³  í’ˆì§ˆ (ìµœì € ì••ì¶•)</span>
          </div>
        </div>
        <div class="quality-value">
          <span id="qualityNum">50</span>
          <small>QUALITY</small>
        </div>
      </div>
    </div>

    <!-- STEP 3: Comparison -->
    <div class="section-title-row">
      <div class="step-num">3</div>
      <h2 style="font-size:16px;font-weight:700;">ì••ì¶• ê²°ê³¼ ë¹„êµ</h2>
    </div>

    <div class="comparison-grid">
      <!-- PNG -->
      <div class="card">
        <div class="card-header">
          <div class="card-dot" style="background:var(--accent-png)"></div>
          <h2 style="color:var(--accent-png)">PNG â€” ë¬´ì†ì‹¤ ì••ì¶•</h2>
          <span class="tag" style="background:rgba(0,212,170,0.15);color:var(--accent-png)">LOSSLESS</span>
        </div>
        <div class="card-body">
          <div class="img-preview" id="pngPreview">
            <img id="pngImg" src="" alt="PNG ë¯¸ë¦¬ë³´ê¸°" style="display:none">
            <span id="pngPlaceholder">ë¡œë”© ì¤‘...</span>
          </div>
          <div class="stats-row">
            <span class="label">íŒŒì¼ í¬ê¸°</span>
            <span class="value" id="pngSize" style="color:var(--accent-png)">â€”</span>
          </div>
          <div class="stats-row">
            <span class="label">ì›ë³¸ ëŒ€ë¹„</span>
            <span class="value" id="pngRatio">â€”</span>
          </div>
          <div class="stats-row">
            <span class="label">ì›ë³¸ í¬ê¸° (px)</span>
            <span class="value" id="pngDim">â€”</span>
          </div>
          <div class="stats-row">
            <span class="label">ë°ì´í„° ì†ì‹¤</span>
            <span class="value" style="color:var(--green)">ì—†ìŒ âœ“</span>
          </div>
        </div>
      </div>

      <!-- JPEG -->
      <div class="card">
        <div class="card-header">
          <div class="card-dot" style="background:var(--accent-jpg)"></div>
          <h2 style="color:var(--accent-jpg)">JPEG â€” ì†ì‹¤ ì••ì¶•</h2>
          <span class="tag" style="background:rgba(255,107,53,0.15);color:var(--accent-jpg)">LOSSY</span>
        </div>
        <div class="card-body">
          <div class="img-preview" id="jpgPreview">
            <img id="jpgImg" src="" alt="JPEG ë¯¸ë¦¬ë³´ê¸°" style="display:none">
            <span id="jpgPlaceholder">ë¡œë”© ì¤‘...</span>
          </div>
          <div class="stats-row">
            <span class="label">íŒŒì¼ í¬ê¸°</span>
            <span class="value" id="jpgSize" style="color:var(--accent-jpg)">â€”</span>
          </div>
          <div class="stats-row">
            <span class="label">PNG ëŒ€ë¹„</span>
            <span class="value" id="jpgRatio">â€”</span>
          </div>
          <div class="stats-row">
            <span class="label">ì ìš© í’ˆì§ˆ</span>
            <span class="value" id="jpgQualityLabel">â€”</span>
          </div>
          <div class="stats-row">
            <span class="label">ë°ì´í„° ì†ì‹¤</span>
            <span class="value" style="color:var(--accent-jpg)" id="lossLabel">ìˆìŒ</span>
          </div>
        </div>
      </div>
    </div>

    <!-- STEP 4: Analysis -->
    <div class="section-title-row">
      <div class="step-num">4</div>
      <h2 style="font-size:16px;font-weight:700;">í¬ê¸° ë¶„ì„</h2>
    </div>

    <div class="analysis-section">
      <div class="bar-compare">
        <div class="bar-label">
          <span style="color:var(--accent-png)">PNG (ë¬´ì†ì‹¤)</span>
          <span id="pngBarLabel" style="font-size:11px">â€”</span>
        </div>
        <div class="bar-track">
          <div class="bar-fill" id="pngBar" style="width:100%;background:var(--accent-png)"></div>
        </div>
      </div>
      <div class="bar-compare">
        <div class="bar-label">
          <span style="color:var(--accent-jpg)">JPEG (ì†ì‹¤)</span>
          <span id="jpgBarLabel" style="font-size:11px">â€”</span>
        </div>
        <div class="bar-track">
          <div class="bar-fill" id="jpgBar" style="width:50%;background:var(--accent-jpg)"></div>
        </div>
      </div>

      <div class="compression-verdict" id="verdict" style="background:rgba(77,142,255,0.08);border:1px solid rgba(77,142,255,0.2)">
        í’ˆì§ˆ ìŠ¬ë¼ì´ë”ë¥¼ ì›€ì§ì—¬ ì••ì¶•ë¥  ë³€í™”ë¥¼ í™•ì¸í•˜ì„¸ìš”.
      </div>
    </div>

    <!-- STEP 5: Zoom -->
    <div class="section-title-row">
      <div class="step-num">5</div>
      <h2 style="font-size:16px;font-weight:700;">í™•ëŒ€ í™”ì§ˆ ë¹„êµ (ì¤‘ì•™ 300% ì¤Œ)</h2>
    </div>

    <div class="zoom-section">
      <div class="zoom-grid">
        <div class="zoom-item">
          <canvas id="zoomPng"></canvas>
          <div class="zoom-tag" style="background:rgba(0,212,170,0.85);color:#000">PNG ë¬´ì†ì‹¤</div>
        </div>
        <div class="zoom-item">
          <canvas id="zoomJpg"></canvas>
          <div class="zoom-tag" style="background:rgba(255,107,53,0.85);color:#fff">JPEG ì†ì‹¤</div>
        </div>
      </div>
      <p style="font-size:12px;color:var(--muted);margin-top:12px;text-align:center;">
        â¬† ì´ë¯¸ì§€ ì¤‘ì•™ì„ 300% í™•ëŒ€í•œ ëª¨ìŠµì…ë‹ˆë‹¤. í’ˆì§ˆì´ ë‚®ì„ìˆ˜ë¡ JPEGì—ì„œ ë¸”ë¡ ë…¸ì´ì¦ˆ(ëª¨ìì´í¬)ê°€ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.
      </p>
    </div>

    <!-- STEP 6: Table -->
    <div class="section-title-row">
      <div class="step-num">6</div>
      <h2 style="font-size:16px;font-weight:700;">ê¸°ë¡í‘œ (ì‹¤ìŠµ ê²°ê³¼)</h2>
    </div>

    <div class="table-section">
      <h3>ğŸ“‹ ì¸¡ì • ê²°ê³¼ ìš”ì•½</h3>
      <table>
        <thead>
          <tr>
            <th>íŒŒì¼ í˜•ì‹</th>
            <th>í¬ê¸°</th>
            <th>ì••ì¶•ë¥ </th>
            <th>ìœ¡ì•ˆ í™”ì§ˆ</th>
            <th>ì í•©í•œ ìš©ë„</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><span style="color:var(--accent-png);font-weight:700;">PNG</span></td>
            <td class="mono" id="tPngSize">â€”</td>
            <td class="mono" id="tPngRatio">â€”</td>
            <td id="tPngQuality"><span style="color:var(--green)">ìš°ìˆ˜ â˜…â˜…â˜…â˜…â˜…</span></td>
            <td style="color:var(--muted);font-size:12px;">ì˜ë£Œì˜ìƒ, ì€í–‰ê¸°ë¡, ë¡œê³ , í…ìŠ¤íŠ¸</td>
          </tr>
          <tr>
            <td><span style="color:var(--accent-jpg);font-weight:700;">JPEG</span></td>
            <td class="mono" id="tJpgSize">â€”</td>
            <td class="mono" id="tJpgRatio">â€”</td>
            <td id="tJpgQuality">â€”</td>
            <td style="color:var(--muted);font-size:12px;">SNS ì‚¬ì§„, ì›¹ ì´ë¯¸ì§€, ìŠ¤íŠ¸ë¦¬ë°</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- STEP 7: Discussion -->
    <div class="section-title-row">
      <div class="step-num">7</div>
      <h2 style="font-size:16px;font-weight:700;">í† ë¡  ì§ˆë¬¸ (í´ë¦­í•´ì„œ ì •ë‹µ í™•ì¸)</h2>
    </div>

    <div class="discussion-section">
      <div class="q-item">
        <div class="q-header" onclick="toggleQ(this)">
          ğŸ¥ ì˜ë£Œ CT ì‚¬ì§„ì—ëŠ” ì–´ë–¤ í˜•ì‹ì´ ë” ì í•©í• ê¹Œìš”?
          <span>â–¼</span>
        </div>
        <div class="q-body">
          <div class="answer-highlight">
            <strong>PNG (ë¬´ì†ì‹¤ ì••ì¶•)</strong>ì´ ì í•©í•©ë‹ˆë‹¤.<br>
            CT ì˜ìƒì€ ë¯¸ì„¸í•œ ì¡°ì§ ì°¨ì´ë¡œ ë³‘ì„ ì§„ë‹¨í•˜ë¯€ë¡œ, ë‹¨ 1í”½ì…€ì˜ ì†ì‹¤ë„ ì˜¤ì§„ìœ¼ë¡œ ì´ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°ì´í„° ì •í™•ì„±ì´ íŒŒì¼ í¬ê¸°ë³´ë‹¤ í›¨ì”¬ ì¤‘ìš”í•©ë‹ˆë‹¤.
          </div>
        </div>
      </div>
      <div class="q-item">
        <div class="q-header" onclick="toggleQ(this)">
          ğŸ“± ì¹´ì¹´ì˜¤í†¡ SNS í”„ë¡œí•„ ì‚¬ì§„ì—ëŠ”?
          <span>â–¼</span>
        </div>
        <div class="q-body">
          <div class="answer-highlight">
            <strong>JPEG (ì†ì‹¤ ì••ì¶•)</strong>ì´ íš¨ìœ¨ì ì…ë‹ˆë‹¤.<br>
            ì‚¬ëŒ ëˆˆì€ ì•½ê°„ì˜ í™”ì§ˆ ì €í•˜ë¥¼ ì˜ ì¸ì‹í•˜ì§€ ëª»í•©ë‹ˆë‹¤. íŒŒì¼ í¬ê¸°ë¥¼ ì¤„ì—¬ ì „ì†¡ ì†ë„ë¥¼ ë†’ì´ëŠ” ê²ƒì´ ë” ì‹¤ìš©ì ì…ë‹ˆë‹¤. ì‹¤ì œë¡œ ì¹´ì¹´ì˜¤í†¡ì€ ì‚¬ì§„ ì „ì†¡ ì‹œ ìë™ìœ¼ë¡œ JPEG ì••ì¶•ì„ ì ìš©í•©ë‹ˆë‹¤.
          </div>
        </div>
      </div>
      <div class="q-item">
        <div class="q-header" onclick="toggleQ(this)">
          ğŸ¦ ì€í–‰ ê³„ì¢Œ ê±°ë˜ ë‚´ì—­(í…ìŠ¤íŠ¸)ì—ëŠ”?
          <span>â–¼</span>
        </div>
        <div class="q-body">
          <div class="answer-highlight">
            <strong>ë¬´ì†ì‹¤ ì••ì¶• (PNG ë˜ëŠ” ZIP)</strong>ì´ í•„ìˆ˜ì…ë‹ˆë‹¤.<br>
            ê¸ˆìœµ ë°ì´í„°ëŠ” ìˆ«ì í•˜ë‚˜ê°€ ë‹¬ë¼ì§€ë©´ í° ë¬¸ì œê°€ ìƒê¹ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ 10,000ì›ì´ 1,000ì›ìœ¼ë¡œ ë°”ë€” ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë°ì´í„° ë¬´ê²°ì„±(integrity)ì´ ìµœìš°ì„ ì…ë‹ˆë‹¤.
          </div>
        </div>
      </div>
      <div class="q-item">
        <div class="q-header" onclick="toggleQ(this)">
          ğŸ¬ ì™œ ë™ì˜ìƒ ìŠ¤íŠ¸ë¦¬ë°(ìœ íŠœë¸Œ)ì€ ì†ì‹¤ ì••ì¶•ì„ ì‚¬ìš©í• ê¹Œìš”?
          <span>â–¼</span>
        </div>
        <div class="q-body">
          <div class="answer-highlight">
            ë¹„ì••ì¶• 1ë¶„ HD ì˜ìƒì˜ í¬ê¸°ëŠ” ì•½ 10~20GBì— ë‹¬í•©ë‹ˆë‹¤.<br>
            ì†ì‹¤ ì••ì¶•(H.264, H.265)ì„ ì ìš©í•˜ë©´ ê°™ì€ ì˜ìƒì„ 100~200MBë¡œ ì¤„ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¸ê°„ì˜ ëˆˆì€ ì´ˆë‹¹ 24~30í”„ë ˆì„ì„ ë³¼ ë•Œ ë¯¸ì„¸í•œ í™”ì§ˆ ì°¨ì´ë¥¼ ì¸ì‹í•˜ê¸° ì–´ë ¤ì›Œ, ì†ì‹¤ì´ ìˆì–´ë„ ì²´ê° í’ˆì§ˆì€ ìœ ì‚¬í•©ë‹ˆë‹¤.
          </div>
        </div>
      </div>
    </div>

  </div><!-- /mainContent -->

</div>

<canvas id="offscreenPng" style="display:none"></canvas>
<canvas id="offscreenJpg" style="display:none"></canvas>

<script>
let originalImage = null;
let pngBlob = null;
let jpgBlob = null;
let quality = 0.5;

const fileInput = document.getElementById('fileInput');
const uploadZone = document.getElementById('uploadZone');
const qualitySlider = document.getElementById('qualitySlider');

// Drag and drop
uploadZone.addEventListener('dragover', e => { e.preventDefault(); uploadZone.classList.add('dragover'); });
uploadZone.addEventListener('dragleave', () => uploadZone.classList.remove('dragover'));
uploadZone.addEventListener('drop', e => {
  e.preventDefault();
  uploadZone.classList.remove('dragover');
  const file = e.dataTransfer.files[0];
  if (file && file.type.startsWith('image/')) processFile(file);
});

fileInput.addEventListener('change', e => {
  if (e.target.files[0]) processFile(e.target.files[0]);
});

qualitySlider.addEventListener('input', () => {
  quality = qualitySlider.value / 100;
  document.getElementById('qualityNum').textContent = qualitySlider.value;
  if (originalImage) renderComparison();
});

function processFile(file) {
  const reader = new FileReader();
  reader.onload = e => {
    const img = new Image();
    img.onload = () => {
      originalImage = img;
      document.getElementById('mainContent').classList.remove('hidden');
      document.getElementById('pngDim').textContent = `${img.width} Ã— ${img.height}`;
      renderComparison();
    };
    img.src = e.target.result;
  };
  reader.readAsDataURL(file);
}

function renderComparison() {
  const img = originalImage;
  const q = quality;

  // PNG rendering
  const pngCanvas = document.getElementById('offscreenPng');
  pngCanvas.width = img.width;
  pngCanvas.height = img.height;
  pngCanvas.getContext('2d').drawImage(img, 0, 0);

  pngCanvas.toBlob(blob => {
    pngBlob = blob;
    const url = URL.createObjectURL(blob);
    const pngImg = document.getElementById('pngImg');
    pngImg.src = url;
    pngImg.style.display = 'block';
    document.getElementById('pngPlaceholder').style.display = 'none';

    const sizeKB = (blob.size / 1024).toFixed(1);
    document.getElementById('pngSize').textContent = formatSize(blob.size);
    document.getElementById('tPngSize').textContent = formatSize(blob.size);
    document.getElementById('pngRatio').textContent = 'ê¸°ì¤€ (100%)';
    document.getElementById('tPngRatio').textContent = 'ê¸°ì¤€';
    document.getElementById('pngBarLabel').textContent = formatSize(blob.size);

    // Now render JPEG
    const jpgCanvas = document.getElementById('offscreenJpg');
    jpgCanvas.width = img.width;
    jpgCanvas.height = img.height;
    jpgCanvas.getContext('2d').drawImage(img, 0, 0);

    jpgCanvas.toBlob(jpgBlob_ => {
      jpgBlob = jpgBlob_;
      const jpgUrl = URL.createObjectURL(jpgBlob_);
      const jpgImg = document.getElementById('jpgImg');
      jpgImg.src = jpgUrl;
      jpgImg.style.display = 'block';
      document.getElementById('jpgPlaceholder').style.display = 'none';

      const jpgRatioPct = ((jpgBlob_.size / blob.size) * 100).toFixed(1);
      const savedPct = (100 - jpgRatioPct).toFixed(1);

      document.getElementById('jpgSize').textContent = formatSize(jpgBlob_.size);
      document.getElementById('tJpgSize').textContent = formatSize(jpgBlob_.size);
      document.getElementById('jpgRatio').textContent = `PNGì˜ ${jpgRatioPct}%`;
      document.getElementById('tJpgRatio').textContent = `${savedPct}% ì ˆê°`;
      document.getElementById('jpgQualityLabel').textContent = `${Math.round(q*100)}%`;
      document.getElementById('jpgBarLabel').textContent = formatSize(jpgBlob_.size);

      // Update bars
      const jpgBarW = Math.max(5, (jpgBlob_.size / blob.size) * 100);
      document.getElementById('pngBar').style.width = '100%';
      document.getElementById('jpgBar').style.width = jpgBarW + '%';

      // Quality label in table
      const qLevel = Math.round(q * 100);
      let stars, color;
      if (qLevel >= 80) { stars = 'ìš°ìˆ˜ â˜…â˜…â˜…â˜…â˜†'; color = 'var(--green)'; }
      else if (qLevel >= 50) { stars = 'ë³´í†µ â˜…â˜…â˜…â˜†â˜†'; color = '#facc15'; }
      else if (qLevel >= 25) { stars = 'ì €í•˜ â˜…â˜…â˜†â˜†â˜†'; color = '#fb923c'; }
      else { stars = 'ë¶ˆëŸ‰ â˜…â˜†â˜†â˜†â˜†'; color = 'var(--red)'; }
      document.getElementById('tJpgQuality').innerHTML = `<span style="color:${color}">${stars}</span>`;
      document.getElementById('lossLabel').style.color = qLevel < 30 ? 'var(--red)' : 'var(--accent-jpg)';

      // Verdict
      const verdict = document.getElementById('verdict');
      let msg = '';
      if (parseFloat(savedPct) > 0) {
        msg = `JPEG (í’ˆì§ˆ ${qLevel}%)ëŠ” PNGë³´ë‹¤ <strong style="color:var(--accent-jpg)">${savedPct}% ë” ì‘ìŠµë‹ˆë‹¤</strong>.`;
        if (qLevel < 20) msg += ' í’ˆì§ˆì´ ë§¤ìš° ë‚®ì•„ ë¸”ë¡ ë…¸ì´ì¦ˆê°€ ë‘ë“œëŸ¬ì§‘ë‹ˆë‹¤.';
        else if (qLevel < 50) msg += ' ìœ¡ì•ˆìœ¼ë¡œ í™”ì§ˆ ì €í•˜ê°€ ë³´ì´ê¸° ì‹œì‘í•©ë‹ˆë‹¤.';
        else if (qLevel < 80) msg += ' ëŒ€ë¶€ë¶„ì˜ ê²½ìš° í—ˆìš© ê°€ëŠ¥í•œ í™”ì§ˆì…ë‹ˆë‹¤.';
        else msg += ' ê³ í’ˆì§ˆ JPEGëŠ” PNGì™€ ìœ¡ì•ˆ êµ¬ë¶„ì´ ê±°ì˜ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.';
      } else {
        msg = `ì´ ì´ë¯¸ì§€ì—ì„œëŠ” JPEGê°€ PNGë³´ë‹¤ ë” í´ ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ì´ë¯¸ ìµœì í™”ëœ ì›ë³¸).`;
      }
      verdict.innerHTML = msg;

      // Zoom canvases
      drawZoom('zoomPng', pngCanvas);
      drawZoom('zoomJpg', jpgCanvas);

      // Re-draw JPG zoom from actual JPEG data
      const jpgImgEl = new Image();
      jpgImgEl.onload = () => {
        const tmpCanvas = document.createElement('canvas');
        tmpCanvas.width = jpgImgEl.width;
        tmpCanvas.height = jpgImgEl.height;
        tmpCanvas.getContext('2d').drawImage(jpgImgEl, 0, 0);
        drawZoom('zoomJpg', tmpCanvas);
      };
      jpgImgEl.src = jpgUrl;

    }, 'image/jpeg', q);
  }, 'image/png');
}

function drawZoom(canvasId, srcCanvas) {
  const dst = document.getElementById(canvasId);
  const sw = srcCanvas.width, sh = srcCanvas.height;
  const zoomSize = Math.min(sw, sh) * 0.3; // 30% of center
  const sx = sw/2 - zoomSize/2;
  const sy = sh/2 - zoomSize/2;

  const displayW = dst.offsetWidth || 300;
  dst.width = displayW;
  dst.height = Math.round(displayW * (zoomSize / zoomSize)); // square-ish
  dst.height = displayW;

  const ctx = dst.getContext('2d');
  ctx.imageSmoothingEnabled = false;
  ctx.drawImage(srcCanvas, sx, sy, zoomSize, zoomSize, 0, 0, dst.width, dst.height);
}

function formatSize(bytes) {
  if (bytes < 1024) return bytes + ' B';
  if (bytes < 1024 * 1024) return (bytes / 1024).toFixed(1) + ' KB';
  return (bytes / (1024 * 1024)).toFixed(2) + ' MB';
}

function toggleQ(header) {
  const body = header.nextElementSibling;
  const arrow = header.querySelector('span');
  const isOpen = body.classList.toggle('open');
  arrow.textContent = isOpen ? 'â–²' : 'â–¼';
}
</script>
</body>
</html>
